<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SwiftCart — Home</title>

  <!-- Tailwind via CDN for fast dev (editable in VS Code later) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* small custom tweaks */
    .card-img { height:160px; object-fit:cover; border-radius:6px }
    .brand { color:#0b74da; font-weight:700 }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">

  <!-- Header -->
  <header class="bg-white shadow-sm">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="/SwiftCart/front/index.html" class="brand text-xl">SwiftCart</a>

      <nav class="flex items-center gap-4">
        <a class="text-slate-600 hover:text-slate-900" href="/SwiftCart/front/index.html">Home</a>
        <a class="text-slate-600 hover:text-slate-900" href="/SwiftCart/products">Products</a>
        <a class="text-slate-600 hover:text-slate-900" href="/SwiftCart/cart">Cart</a>
        <a class="text-blue-600 font-medium" href="/SwiftCart/front/login.html">Sign in</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="max-w-6xl mx-auto px-4 py-10">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
      <div class="md:col-span-2">
        <h1 class="text-3xl font-extrabold mb-3">Find great products. Fast.</h1>
        <p class="text-slate-600 mb-6">Beautiful, responsive demo UI that works with your existing Java servlets. Click the product list to load server-rendered pages.</p>

        <div class="flex gap-3">
          <a class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow" href="/SwiftCart/products">Browse products</a>
          <a class="inline-flex items-center gap-2 px-4 py-2 border rounded-lg" href="/SwiftCart/front/login.html">Sign in</a>
        </div>
      </div>

      <div class="hidden md:block">
        <!-- design reference image (local path) -->
        <img src="/mnt/data/Screenshot 2025-11-23 043953.png" alt="design ref" class="w-full rounded-lg shadow" />
      </div>
    </div>
  </section>

  <!-- Product preview grid -->
  <main class="max-w-6xl mx-auto px-4 pb-12">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-semibold">Featured</h2>
      <a class="text-sm text-slate-600" href="/SwiftCart/products">View all products →</a>
    </div>

    <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <!-- JS will populate preview cards here -->
      <div class="col-span-full text-slate-500">Loading preview…</div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-slate-500">
      Built for local demo — your frontend in VS Code. Public sharing via tunnel (ngrok / cloudflared) can be next.
    </div>
  </footer>

  <!-- Client JS: fetch server HTML and extract some titles to render preview cards -->
  <script>
    async function renderPreview() {
      const grid = document.getElementById('productGrid');
      try {
        const res = await fetch('/SwiftCart/products');
        if (!res.ok) {
          grid.innerHTML = '<div class="col-span-full text-red-600">Server returned ' + res.status + '</div>';
          return;
        }
        const html = await res.text();
        const frag = document.createRange().createContextualFragment(html);

        // Try to find product title nodes in server HTML
        const selectors = ['h5', 'h6', '.card-title', '.product-name', '.product-title'];
        let titles = [];
        for (const s of selectors) {
          const nodes = frag.querySelectorAll(s);
          if (nodes && nodes.length) {
            titles = Array.from(nodes).map(n => n.textContent.trim()).filter(Boolean);
            if (titles.length) break;
          }
        }

        grid.innerHTML = '';
        if (titles.length) {
          titles.slice(0,8).forEach((t,i) => {
            const card = document.createElement('article');
            card.className = 'bg-white rounded-lg p-3 shadow card';
            card.innerHTML = `
              <img class="card-img" src="/SwiftCart/front/static/images/product-placeholder.png" alt="${t}" />
              <h3 class="mt-3 text-lg font-semibold">${t}</h3>
              <p class="text-sm text-slate-500 mt-1">Preview from server HTML</p>
              <div class="mt-3 flex gap-2"><a class="btn" href="/SwiftCart/product?id=${i+1}">View</a></div>
            `;
            grid.appendChild(card);
          });
        } else {
          // fallback demo cards
          for (let i=1;i<=4;i++){
            const card = document.createElement('article');
            card.className = 'bg-white rounded-lg p-3 shadow card';
            card.innerHTML = `
              <img class="card-img" src="/SwiftCart/front/static/images/product-placeholder.png" alt="Demo ${i}" />
              <h3 class="mt-3 text-lg font-semibold">Demo Product ${i}</h3>
              <p class="text-sm text-slate-500 mt-1">Static demo card</p>
              <div class="mt-3 flex gap-2"><a class="btn" href="/SwiftCart/products">View all</a></div>
            `;
            grid.appendChild(card);
          }
        }
      } catch (e) {
        grid.innerHTML = '<div class="col-span-full text-red-600">Unable to reach backend — ' + e.message + '</div>';
      }
    }

    // run on load
    renderPreview();
  </script>
</body>
</html>
